<div *ngIf="isVisible" class="fixed inset-0 z-50 flex items-center justify-center" 
     [style.background-color]="'var(--modal-overlay)'">
  <div class="rounded-lg shadow-xl max-w-md w-full mx-4 p-6"
       [style.background-color]="'var(--panel-bg)'"
       [style.color]="'var(--text-primary)'"
       [style.border]="'1px solid var(--border-color)'">
    
    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-xl font-semibold" [style.color]="'var(--text-primary)'">
        ‚öôÔ∏è Configura√ß√µes da Sala
      </h2>
      <button 
        (click)="onClose()"
        class="p-2 rounded-lg transition-colors"
        [style.color]="'var(--text-secondary)'"
        [style.background-color]="'var(--bg-secondary)'"
        [style.border]="'1px solid var(--border-color)'">
        ‚úï
      </button>
    </div>

    <!-- Content -->
    <div class="mb-6">
      <div class="space-y-4">
        <!-- Nome da Sala -->
        <div>
          <label for="classroomName" class="block text-sm font-medium mb-2" 
                 [style.color]="'var(--text-primary)'">
            Nome da Sala
          </label>
          <input
            id="classroomName"
            type="text"
            [(ngModel)]="classroomName"
            (keypress)="onKeyPress($event)"
            placeholder="Digite o nome da sala"
            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-colors"
            [style.border-color]="'var(--input-border)'"
            [style.background-color]="'var(--input-bg)'"
            [style.color]="'var(--input-text)'"
            [style.focus-ring-color]="'var(--primary-color)'"
            [disabled]="isLoading"
          />
        </div>

        <!-- Ano Letivo -->
        <div>
          <label for="academicYear" class="block text-sm font-medium mb-2" 
                 [style.color]="'var(--text-primary)'">
            Ano Letivo
          </label>
          <input
            id="academicYear"
            type="text"
            [(ngModel)]="academicYear"
            (keypress)="onKeyPress($event)"
            (input)="onYearInput($event)"
            placeholder="Ex: 2025"
            maxlength="4"
            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-colors"
            [style.border-color]="'var(--input-border)'"
            [style.background-color]="'var(--input-bg)'"
            [style.color]="'var(--input-text)'"
            [style.focus-ring-color]="'var(--primary-color)'"
            [disabled]="isLoading"
          />
        </div>

        <!-- Status Ativo/Inativo -->
        <div>
          <label class="block text-sm font-medium mb-2" 
                 [style.color]="'var(--text-primary)'">
            Status da Sala
          </label>
          <div class="flex items-center space-x-4">
            <label class="flex items-center">
              <input
                type="radio"
                [(ngModel)]="isActive"
                [value]="true"
                [disabled]="isLoading"
                class="mr-2"
                [style.accent-color]="'var(--primary-color)'"
              />
              <span class="text-sm" [style.color]="'var(--text-primary)'">
                <span class="inline-block w-2 h-2 rounded-full mr-2" 
                      [style.background-color]="'var(--success-color)'"></span>
                Ativa
              </span>
            </label>
            <label class="flex items-center">
              <input
                type="radio"
                [(ngModel)]="isActive"
                [value]="false"
                [disabled]="isLoading"
                class="mr-2"
                [style.accent-color]="'var(--primary-color)'"
              />
              <span class="text-sm" [style.color]="'var(--text-primary)'">
                <span class="inline-block w-2 h-2 rounded-full mr-2" 
                      [style.background-color]="'var(--error-color)'"></span>
                Inativa
              </span>
            </label>
          </div>
        </div>

        <!-- Error Message -->
        <div *ngIf="error" class="text-sm" [style.color]="'var(--error-color)'">
          {{ error }}
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="flex gap-3">
      <button
        type="button"
        (click)="onClose()"
        [disabled]="isLoading"
        class="flex-1 px-4 py-2 text-sm font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        [style.background-color]="'var(--bg-secondary)'"
        [style.color]="'var(--text-primary)'"
        [style.border]="'1px solid var(--border-color)'"
      >
        Cancelar
      </button>
      <button
        type="button"
        (click)="onSubmit()"
        [disabled]="isLoading || !classroomName.trim()"
        class="flex-1 px-4 py-2 text-sm font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        [style.background-color]="'var(--primary-color)'"
        [style.color]="'var(--primary-text)'"
        [style.border]="'1px solid var(--primary-color)'"
      >
        <span *ngIf="!isLoading">Salvar Altera√ß√µes</span>
        <span *ngIf="isLoading" class="flex items-center justify-center">
          <div class="animate-spin rounded-full h-4 w-4 border-b-2 mr-2"
               [style.border-color]="'var(--primary-text)'"></div>
          Salvando...
        </span>
      </button>
    </div>

    <!-- Info -->
    <div class="mt-4 p-3 rounded-lg text-sm"
         [style.background-color]="'var(--info-bg)'"
         [style.color]="'var(--info-text)'"
         [style.border]="'1px solid var(--border-color)'">
      <p><strong>üí° Dica:</strong> Salas inativas n√£o aparecer√£o na lista de conversas ativas.</p>
    </div>
  </div>
</div>
